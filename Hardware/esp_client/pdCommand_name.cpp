#include "pdCommand_name.h"
#include "pdString.h"

///--------------------------------------------------------------------------------------
using namespace Terminal;
///--------------------------------------------------------------------------------------





 ///=====================================================================================
///
/// Constructor
/// 
/// 
///--------------------------------------------------------------------------------------
ACMD_name :: ACMD_name(Options::AOptions *options)
	:
		mOptions(options)
{

}
///--------------------------------------------------------------------------------------





 ///=====================================================================================
///
/// Destructor
/// 
/// 
///--------------------------------------------------------------------------------------
ACMD_name :: ~ACMD_name()
{

}
///--------------------------------------------------------------------------------------








 ///=====================================================================================
///
/// Выполнение команды
/// 
/// 
///--------------------------------------------------------------------------------------
void ACMD_name :: execute(Stream *stream, const String &param)
{
	if (mOptions == nullptr || stream == nullptr)
	{
		return;
	}

	String cmd = name();

	if (param != cmd)
	{
		//установка нового имени
		String nm = param.substring(cmd.length());
		nm.trim();
		if (nm.length() > 0)
		{
			mOptions->setName(nm);
		}
	}

	stream->print(FPSTR("Имя устройства: "));
	stream->println(mOptions->name());
}
///--------------------------------------------------------------------------------------



