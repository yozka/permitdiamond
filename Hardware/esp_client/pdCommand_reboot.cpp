#include "pdCommand_reboot.h"

#include <ESP8266WiFi.h>

///--------------------------------------------------------------------------------------
using namespace Terminal;
///--------------------------------------------------------------------------------------





 ///=====================================================================================
///
/// Constructor
/// 
/// 
///--------------------------------------------------------------------------------------
ACMD_reboot :: ACMD_reboot()
{

}
///--------------------------------------------------------------------------------------





 ///=====================================================================================
///
/// Destructor
/// 
/// 
///--------------------------------------------------------------------------------------
ACMD_reboot :: ~ACMD_reboot()
{

}
///--------------------------------------------------------------------------------------








 ///=====================================================================================
///
/// Выполнение команды
/// 
/// 
///--------------------------------------------------------------------------------------
void ACMD_reboot :: execute(Stream *stream, const String &param)
{
	if (stream == nullptr)
	{
		ESP.restart();
		return;
	}
	stream->print(FPSTR("Перезагрузка устройства"));
	for (int i = 0; i < 5; i++)
	{
		delay(500);
		stream->print(FPSTR("."));
	}
	ESP.wdtDisable();
	ESP.restart();
	stream->println();
}
///--------------------------------------------------------------------------------------



